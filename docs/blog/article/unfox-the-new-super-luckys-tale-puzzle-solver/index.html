<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta content="Writing tool called Unfox, tool for solving puzzles from Super Lucky's Tale and New Super Lucky's Tale. Built with Rust and BFS, it features a Svelte interface for easy puzzle input and step-by-step solution visualization.
" name=description><meta content="width=device-width" name=viewport><link href=/favicon.ico rel=icon type=image/x-icon><link href=/favicon.ico rel=icon type=image/x-icon><link href=/favicon-16x16.png rel=icon type=image/png sizes=16x16><link href=/favicon-32x32.png rel=icon type=image/png sizes=32x32><link href=/sitemap-index.xml rel=sitemap><title>Unfox: The New Super Lucky&#39;s Tale Puzzle Solver | Blog | Maciej Mieńko</title><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><link href=/static/_slug_.CcTgfJaU.css rel=stylesheet><style>@charset "UTF-8";article.article-content .astro-code{padding:1rem;margin:0 1rem 1rem;border-radius:1rem;border:1px solid rgba(255,255,255,.1);background-color:#24292e;background:radial-gradient(circle at right bottom,#ffffff1a,#ffffff0d 30%,#fff0);position:relative}article.article-content .astro-code:after{content:attr(data-language);display:block;position:absolute;color:#0000001a;right:0;bottom:0;font-size:3rem}article.article-content h2,article.article-content h3{margin-bottom:1rem}article.article-content p{padding:0 2rem;margin:0;margin-bottom:1rem;text-align:justify;font-size:1.1rem;color:#ddd;font-weight:300}article.article-content p strong{font-weight:600}article.article-content ol,article.article-content ul{padding:0 2rem;margin:0;margin-bottom:1rem;list-style:none;font-weight:300}article.article-content ol li,article.article-content ul li{margin-bottom:.5rem;padding-left:1rem;position:relative;text-align:justify}article.article-content ol li:before,article.article-content ul li:before{content:"•";position:absolute;left:0;color:#ddd}article.article-content code{padding:.2rem .5rem;border-radius:.5rem;background-color:#ffffff1a;font-size:.9rem}article.article-content pre code{padding:0;background-color:transparent;border-radius:0}.related-articles[data-astro-cid-2zkmu4eg]{margin-top:3rem;display:flex;flex-direction:column;gap:1rem}.related-articles[data-astro-cid-2zkmu4eg] h2[data-astro-cid-2zkmu4eg]{font-size:1.5rem}.related-articles[data-astro-cid-2zkmu4eg] .card[data-astro-cid-2zkmu4eg]{padding:1rem;border:1px solid var(--background-variant);border-radius:.5rem;text-decoration:none;color:var(--text);transition:background-color .2s;display:flex;flex-direction:column;gap:.5rem}.related-articles[data-astro-cid-2zkmu4eg] .card[data-astro-cid-2zkmu4eg]:hover{background-color:var(--background-variant);box-shadow:0 0 10px #0000001a}.related-articles[data-astro-cid-2zkmu4eg] .card[data-astro-cid-2zkmu4eg] h3[data-astro-cid-2zkmu4eg]{margin-bottom:.5rem}.related-articles[data-astro-cid-2zkmu4eg] .card[data-astro-cid-2zkmu4eg] .meta[data-astro-cid-2zkmu4eg]{font-size:.9rem;color:var(--text-dim)}.related-articles[data-astro-cid-2zkmu4eg] .card[data-astro-cid-2zkmu4eg] .meta[data-astro-cid-2zkmu4eg]>span[data-astro-cid-2zkmu4eg]:not(:last-child):after{content:"•";margin:0 .5rem}.meta[data-astro-cid-zm77yjld]{font-size:.9rem;color:var(--text-dim)}.meta[data-astro-cid-zm77yjld]>span[data-astro-cid-zm77yjld]:not(:last-child):after{content:"•";margin:0 .5rem}.tags[data-astro-cid-pjkakwps]{display:inline-flex;gap:.5rem}.tags[data-astro-cid-pjkakwps] .tag[data-astro-cid-pjkakwps]{padding:.1rem .3rem;border-radius:5px;background-color:var(--background-variant);font-size:.8rem;color:var(--text-dim);transition:background-color .3s,color .3s}.tags[data-astro-cid-pjkakwps] .tag[data-astro-cid-pjkakwps]:hover{background-color:var(--text-accent);color:var(--background)}article[data-astro-cid-iypnqtyp]{display:flex;flex-direction:column}article[data-astro-cid-iypnqtyp] .date[data-astro-cid-iypnqtyp]{color:var(--text-dim);font-size:.8rem}article[data-astro-cid-iypnqtyp] .meta[data-astro-cid-iypnqtyp]{display:flex;gap:.5rem;align-items:center}article[data-astro-cid-iypnqtyp] .meta[data-astro-cid-iypnqtyp] .le-dot[data-astro-cid-iypnqtyp]{color:var(--text-dim)}article[data-astro-cid-iypnqtyp] .description[data-astro-cid-iypnqtyp]{text-align:justify;font-weight:300}@media (max-width:768px){article[data-astro-cid-iypnqtyp] .description[data-astro-cid-iypnqtyp]{font-size:1.1rem}}</style><script src=/static/hoisted.DmyiDnET.js type=module></script><script src=/static/page.DlXkxCA4.js type=module></script><style>.image-wrapper[data-astro-cid-jurm72rt]{display:flex;align-items:center;flex-direction:column;margin-bottom:1rem}.image-wrapper[data-astro-cid-jurm72rt] .image[data-astro-cid-jurm72rt] img[data-astro-cid-jurm72rt]{width:100%;height:100%;object-fit:cover}.image-wrapper[data-astro-cid-jurm72rt].centered{justify-content:center}.image-wrapper[data-astro-cid-jurm72rt].rounded .image[data-astro-cid-jurm72rt] img[data-astro-cid-jurm72rt]{border-radius:1rem}.image-wrapper[data-astro-cid-jurm72rt].width-full,.image-wrapper[data-astro-cid-jurm72rt].width-full .image[data-astro-cid-jurm72rt]{width:100%}.image-wrapper[data-astro-cid-jurm72rt].bordered .image[data-astro-cid-jurm72rt] img[data-astro-cid-jurm72rt]{border:1px solid rgba(255,255,255,.1)}.image-wrapper[data-astro-cid-jurm72rt] .sub[data-astro-cid-jurm72rt]{color:var(--text-dim);font-size:.8rem;margin-top:.5rem}</style><style>[data-astro-transition-scope=astro-xqdc7vbj-1]{view-transition-name:astro-xqdc7vbj-1}@layer astro{::view-transition-old(astro-xqdc7vbj-1){animation-duration:.5s,.5s;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeOut,astroSlideToLeft}::view-transition-new(astro-xqdc7vbj-1){animation-duration:.5s,.5s;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeIn,astroSlideFromRight}[data-astro-transition=back]::view-transition-old(astro-xqdc7vbj-1){animation-name:astroFadeOut,astroSlideToRight}[data-astro-transition=back]::view-transition-new(astro-xqdc7vbj-1){animation-name:astroFadeIn,astroSlideFromLeft}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-xqdc7vbj-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-xqdc7vbj-1]{animation-duration:.5s,.5s;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeOut,astroSlideToLeft}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-xqdc7vbj-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-xqdc7vbj-1]{animation-duration:.5s,.5s;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeIn,astroSlideFromRight}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-xqdc7vbj-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-xqdc7vbj-1]{animation-name:astroFadeOut,astroSlideToRight}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-xqdc7vbj-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-xqdc7vbj-1]{animation-name:astroFadeIn,astroSlideFromLeft}</style><style>[data-astro-transition-scope=astro-x7r6ij7s-2]{view-transition-name:header}@layer astro{::view-transition-old(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-x7r6ij7s-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-x7r6ij7s-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-x7r6ij7s-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-x7r6ij7s-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-x7r6ij7s-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-x7r6ij7s-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-x7r6ij7s-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-x7r6ij7s-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-l5qslcgd-3]{view-transition-name:header--avatar}@layer astro{::view-transition-old(header--avatar){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(header--avatar){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(header--avatar){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(header--avatar){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-l5qslcgd-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-l5qslcgd-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-l5qslcgd-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-l5qslcgd-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-l5qslcgd-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-l5qslcgd-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-l5qslcgd-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-l5qslcgd-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-sie7fnzq-4]{view-transition-name:breadcrumbs}@layer astro{::view-transition-old(breadcrumbs){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(breadcrumbs){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(breadcrumbs){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(breadcrumbs){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sie7fnzq-4],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-sie7fnzq-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sie7fnzq-4],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-sie7fnzq-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sie7fnzq-4],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-sie7fnzq-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sie7fnzq-4],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-sie7fnzq-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style></head><body><main><nav data-astro-cid-rxxavq4o><a href=/about data-astro-cid-rxxavq4o>About</a> <a href=/blog data-astro-cid-rxxavq4o>Articles</a> <a href="javascript:location='mailto:mienkomaciej@gmail.com';void 0" class=icon-link aria-label="Email Link" data-astro-cid-rxxavq4o><svg class="icon icon-tabler icon-tabler-at" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 viewBox="0 0 24 24" width=24 xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path><path d="M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28"></path></svg> </a><a href=https://github.com/MrMaxie class=icon-link aria-label="Github Link" data-astro-cid-rxxavq4o><svg class="icon icon-tabler icon-tabler-brand-github" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 viewBox="0 0 24 24" width=24 xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg> </a><a href=https://www.linkedin.com/in/maciej-mie%C5%84ko-b0200b190/ class=icon-link aria-label="LinkedIn Link" data-astro-cid-rxxavq4o><svg class="icon icon-tabler icon-tabler-brand-linkedin" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 viewBox="0 0 24 24" width=24 xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path><path d="M8 11l0 5"></path><path d="M8 8l0 .01"></path><path d="M12 16l0 -5"></path><path d="M16 16v-3a2 2 0 0 0 -4 0"></path></svg></a></nav><section class="header header--smaller" data-astro-cid-gfykqide data-astro-transition-scope=astro-x7r6ij7s-2><div class=name data-astro-cid-gfykqide>Maciej (Maxie) Mieńko</div><div class=sub data-astro-cid-gfykqide>Professional overthinker with a keyboard</div><div class=avatar data-astro-cid-gfykqide data-astro-transition-scope=astro-l5qslcgd-3></div></section><div class=separator data-astro-cid-gfykqide></div><div class=main__content data-astro-transition-scope=astro-xqdc7vbj-1><div class=breadcrumbs data-astro-transition-scope=astro-sie7fnzq-4 data-astro-cid-ilhxcym7><a href=/ class=crumb data-astro-cid-ilhxcym7>Home </a><a href=/blog class=crumb data-astro-cid-ilhxcym7>Blog </a><span class=crumb data-astro-cid-ilhxcym7>Current Post</span></div><h1 data-astro-cid-zm77yjld>Unfox: The New Super Lucky&#39;s Tale Puzzle Solver</h1><div class=meta data-astro-cid-zm77yjld><span data-astro-cid-zm77yjld>15.11.2024</span> <span data-astro-cid-zm77yjld><div class=tags data-astro-cid-pjkakwps><a href=/blog/tag/rust class=tag data-astro-cid-pjkakwps>Rust </a><a href=/blog/tag/svelte class=tag data-astro-cid-pjkakwps>Svelte</a></div></span></div><article class=article-content><p>The puzzles in <strong>Super Lucky’s Tale</strong> and <strong>New Super Lucky’s Tale</strong> aren’t exactly groundbreaking, but their clean, grid — based structure intrigued me. <em>Could I automate solving them?</em> Sure, I could’ve just solved them by hand — they’re simple enough — but where’s the fun in that?</p><p>That’s how <strong>Unfox</strong> came to life. It’s a small project to programmatically solve these puzzles, giving me an opportunity to explore algorithms, Rust, and a few unexpected insights about performance optimization along the way.</p><h2 id=introduce-the-puzzle-how-do-these-puzzles-work>Introduce the puzzle: How Do These Puzzles Work?</h2><div class="bordered image-wrapper rounded width-full" data-astro-cid-jurm72rt><div class=image data-astro-cid-jurm72rt><img alt="Puzzle example" data-astro-cid-jurm72rt decoding=async height=299 loading=eager src=/static/puzzle-example.fhw4eSFL_ZJNtH8.webp width=743></div><div class=sub data-astro-cid-jurm72rt>Example of a puzzle in Super Lucky&#39;s Tale</div></div><p>In these puzzles, you control a board with pawns (foxes and monsters) that move until they hit an obstacle. Your task is to guide all the foxes to their respective goal points.</p><p>The key rules:</p><ul><li>Pawns can move in four directions: up, down, left, and right.</li><li>A pawn continues moving in a straight line until it hits a wall or another pawn.</li><li>Monsters serve as movable obstacles but don’t need to reach any specific location.</li><li>The grid itself remains static throughout the puzzle.</li></ul><p>The complexity arises from the fact that moving one pawn often sets up (or blocks) the path for others. It’s a satisfying logic problem, and while the puzzles aren’t difficult, they were a great foundation for building an automated solver.</p><p>My observation was clear: <em>there are a finite number of possibilities</em>. 🎯</p><h2 id=choosing-search-algorithm-bfs-vs-dfs>Choosing search algorithm, BFS vs DFS</h2><p>When designing the algorithm, I had a choice: <strong>DFS</strong> or <strong>BFS</strong>? The difference between the two wasn’t huge in this case, given the simplicity of the puzzles. Both would’ve worked just fine.</p><p>But let’s return to theory for a moment. What are these algorithms? 🧩</p><ul><li><strong>DFS (Depth-First Search)</strong>: It explores as far as possible along each branch before backtracking. It’s often used in scenarios where the search space is large, and you want to find a solution quickly.</li><li><strong>BFS (Breadth-First Search)</strong>: It systematically explores all moves layer by layer, ensuring it finds the shortest solution.</li></ul><p>But since the puzzles were simple and I could afford a bit of extra computation, I went with <strong>BFS</strong> (Breadth-First Search). DFS, while faster in some scenarios, doesn’t guarantee optimality, and I figured - why not aim for the shortest path if I could?</p><p>In hindsight, the decision didn’t drastically impact performance because the search space was limited. But it was a fun opportunity to work with BFS and see it in action on a small-scale problem.</p><h2 id=how-does-unfox-solve-puzzles>How Does Unfox Solve Puzzles?</h2><div class="bordered image-wrapper rounded width-full" data-astro-cid-jurm72rt><div class=image data-astro-cid-jurm72rt><img alt="Puzzle example input" data-astro-cid-jurm72rt decoding=async height=1223 loading=eager src=/static/puzzle-example-input.DjOydUee_SRVfN.webp width=1556></div><div class=sub data-astro-cid-jurm72rt>Example of a puzzle input in Unfox using GUI</div></div><p>Unfox represents the puzzle as a grid, where each cell has attributes like:</p><ul><li><strong>Type</strong>: Wall, empty space, or goal.</li><li><strong>Pawn</strong>: Fox, monster, or nothing.</li></ul><p>How it works, step by step:</p><ol><li><strong>Describe the Puzzle</strong>: Here I found the GUI in the form of a frontend in Svelte strongly useful. It allows you to describe all the information with ease. The GUI allows you to describe the puzzle in detail: the puzzle can have any size, each field can have any pawn, each field can have any type (goal, normal, wall) and each field can have any edges that describe the allowed paths between fields.</li><li><strong>Sending the Puzzle to the Solver</strong>: The GUI sends a query to the backend, which will continue until it finishes solving the puzzle or reaches the move limit. The backend does one puzzle at a time.</li><li><strong>Initialize the Queue</strong>: BFS starts with the initial positions of all pawns.</li><li><strong>Simulate Moves</strong>: For each possible move (up, down, left, right):<ul><li>Slide the selected pawn in the given direction until it hits a wall or another pawn.</li><li>Record the new positions of all pawns after the move - thanks to this, we can easily avoid duplicates.</li></ul></li><li><strong>Check the Goal</strong>: If all foxes are in their respective goals, the puzzle is solved.</li><li><strong>Repeat Until Solved</strong>: If the puzzle isn’t solved and the limit of moves hasn’t been reached, repeat the process with the new positions of the pawns.</li></ol><h2 id=gui-for-solution-preview>GUI for Solution Preview</h2><p>I found it helpful to visualize the solution. The GUI allows you to see the solution step by step, showing the moves of each pawn. It’s a great way to understand the algorithm and see how the pawns move in real time. And also it’s a great way to copy the solution to the game itself. 🤣</p><p>Preview allows to see the each step of the solution by representation of the chosen branch of the algorithm.</p><div class="bordered image-wrapper rounded width-full" data-astro-cid-jurm72rt><div class=image data-astro-cid-jurm72rt><img alt="Puzzle example output" data-astro-cid-jurm72rt decoding=async height=1215 loading=eager src=/static/puzzle-example-output.t4PCZOzb_2m0Qsq.webp width=1553></div><div class=sub data-astro-cid-jurm72rt>Example of a puzzle output in Unfox using GUI</div></div><h2 id=lessons-learned-optimizing-state-representation>Lessons Learned: Optimizing State Representation</h2><p>Building Unfox was a deep dive into how design decisions affect both performance and code clarity. Here are the key lessons I took away:</p><h3 id=1-hashmaps-vs-vectors-custom-hashing-matters>1. HashMaps vs. Vectors: Custom Hashing Matters</h3><p>Initially, I used a <code>Vec</code> to track the history of visited states in BFS. It seemed like the simplest solution, but as the number of states grew, the performance took a massive hit.</p><p>Switching to a <code>HashMap</code> with custom hashing was a game-changer. By hashing only the relevant data — specifically, the positions of the pawns — and ignoring the static parts of the grid, I drastically reduced the overhead of comparisons. For some reason, the improvement felt multiplicative rather than just incremental. This reinforced the importance of tailoring data structures to fit the problem.</p><h3 id=2-separating-static-and-dynamic-data>2. Separating Static and Dynamic Data</h3><p>Right now, my implementation treats the grid and the pawn positions as a single unit. This is convenient, but not optimal.</p><p>A better approach would’ve been to separate the static grid data (walls, goals) from the dynamic pawn positions. The static data could be precomputed and reused, while the dynamic data could be updated during the BFS traversal. This separation would reduce memory usage and eliminate redundant calculations. While I stuck with the simpler design for convenience, this was a key realization for improving efficiency in future projects.</p><h3 id=3-processor-words-are-faster-than-youd-think>3. Processor Words Are Faster Than You’d Think</h3><p>At first, I leaned toward using compact 8-bit containers for data, thinking smaller data sizes would automatically mean faster performance. But the opposite happened: the program slowed down instead of speeding up.</p><p>After refreshing my knowledge of how CPUs handle data, I realized that the <strong>processor’s word size</strong> (e.g., <code>usize</code> in Rust) is the most efficient unit of operation. This is because it avoids alignment adjustments and splits during operations. Switching to processor words improved performance noticeably, even though it felt counter-intuitive given the memory savings smaller containers could theoretically offer. It was a great reminder that optimal solutions depend on the context and hardware specifics.</p><h3 id=4-readable-structures-vs-manual-offsets>4. Readable Structures vs. Manual Offsets</h3><p>I initially thought manually managing offsets in a <code>Vec</code> - where I knew exactly where to find each piece of data - would make the program faster. It seemed logical: less structure means less overhead, <em>right?</em></p><p><strong>Wrong.</strong></p><p>It turned out that structural data types with static offsets were significantly faster. Not only were they more readable and easier to work with, but they also performed much better. Why? Because the compiler can calculate and optimize offsets once during compilation, whereas manual offset calculations are repeated every time at runtime.</p><p>This was a lightbulb moment: <em>“Readable doesn’t mean slower; sometimes, it’s the opposite.</em>” Structures were faster, clearer, and saved me from manually recalculating offsets repeatedly.</p><h2 id=why-rust-and-svelte>Why Rust and Svelte?</h2><p>I chose Rust for the backend and Svelte for the frontend not because they were the best tools for the job, but because I wanted to experiment. Rust’s memory safety and performance were perfect for implementing BFS, while Svelte made it easy to build an intuitive interface for inputting puzzles and visualizing solutions. Together, they worked beautifully.</p><p>And I know that writing it purely in TypeScript wouldn’t change much in terms of performance since these are such simple puzzles. The choice was heavily driven by the thought, “<em>This is what I’d like to write it in for myself.</em>” 😁👌</p><h2 id=final-thoughts>Final Thoughts</h2><p>Unfox started as a curiosity but turned into a great learning experience. From experimenting with BFS to optimizing state representation and understanding the trade-offs of coupling static and dynamic data, this small project taught me a lot about algorithms and performance.</p><p>If you’re curious to see it in action — or just want to play around with it — you can check out <a href=https://github.com/MrMaxie/unfox>Unfox on GitHub</a>.</p></article><div class=related-articles data-astro-cid-2zkmu4eg><h2 data-astro-cid-2zkmu4eg>Related Articles</h2><article data-astro-cid-iypnqtyp><h3 data-astro-cid-iypnqtyp><a href=/blog/article/php-game-development class=title data-astro-cid-iypnqtyp>PHP Game Development?</a></h3><div class=meta data-astro-cid-iypnqtyp><time class=date data-astro-cid-iypnqtyp>22.02.2024</time> <span class=le-dot data-astro-cid-iypnqtyp>•</span><div class=tags data-astro-cid-pjkakwps><a href=/blog/tag/php class=tag data-astro-cid-pjkakwps>PHP </a><a href=/blog/tag/game-development class=tag data-astro-cid-pjkakwps>Game Development </a><a href=/blog/tag/c-or-cplusplus class=tag data-astro-cid-pjkakwps>C/C++</a></div></div><p class=description data-astro-cid-iypnqtyp>A story about a teenage attempt to push the boundaries of PHP by creating a game inspired by Minecraft. From building native plugins to experimenting with OpenGL and hybrid solutions, this journey explores the challenges, failures, and lessons learned.</p></article></div></div><footer><div class=left><a href="javascript:location='mailto:mienkomaciej@gmail.com';void 0">Get in touch</a></div><div class=right><p>© <span data-cp-year>2024</span> Maciej (Maxie) Mieńko</p></div></footer></main></body></html>